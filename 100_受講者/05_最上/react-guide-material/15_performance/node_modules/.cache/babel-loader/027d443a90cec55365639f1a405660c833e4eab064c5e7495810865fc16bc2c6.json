{"ast":null,"code":"// POINT [Concurrent Mode]useDeferedValueでユーザビリティを向上\nimport{useState,useTransition,useDeferredValue}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const generateDummyItem=num=>{return new Array(num).fill(null).map((item,index)=>\"item \".concat(index));};const dummyItems=generateDummyItem(10000);const Example=()=>{// const [isPending, startTransition] = useTransition();\nconst[filterVal,setFilterVal]=useState(\"\");const changeHandler=e=>{// startTransition(() => {\n//   setFilterVal(e.target.value);\n// });\nsetFilterVal(e.target.value);};const filteredItems=dummyItems.filter(item=>{if(filterVal===\"\")return true;return item.includes(filterVal);}).map(item=>/*#__PURE__*/_jsx(\"li\",{children:item},item));const deferredItems=useDeferredValue(filteredItems);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:changeHandler}),/*#__PURE__*/_jsx(\"ul\",{children:deferredItems})]});};export default Example;","map":{"version":3,"names":["useState","useTransition","useDeferredValue","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","generateDummyItem","num","Array","fill","map","item","index","concat","dummyItems","Example","filterVal","setFilterVal","changeHandler","e","target","value","filteredItems","filter","includes","children","deferredItems","type","onChange"],"sources":["C:/Users/user/Documents/work/react-guide-material/15_performance/src/070_useDeferredValue/end/Example.js"],"sourcesContent":["// POINT [Concurrent Mode]useDeferedValueでユーザビリティを向上\r\nimport { useState, useTransition, useDeferredValue } from \"react\";\r\n\r\nconst generateDummyItem = (num) => {\r\n  return new Array(num).fill(null).map((item, index) => `item ${index}`);\r\n};\r\n\r\nconst dummyItems = generateDummyItem(10000);\r\n\r\nconst Example = () => {\r\n  // const [isPending, startTransition] = useTransition();\r\n  const [filterVal, setFilterVal] = useState(\"\");\r\n\r\n  const changeHandler = (e) => {\r\n    // startTransition(() => {\r\n    //   setFilterVal(e.target.value);\r\n    // });\r\n    setFilterVal(e.target.value);\r\n  };\r\n\r\n  const filteredItems = dummyItems\r\n  .filter((item) => {\r\n    if (filterVal === \"\") return true;\r\n    return item.includes(filterVal);\r\n  })\r\n  .map((item) => (\r\n    <li key={item}>{item}</li>\r\n  ));\r\n\r\n  const deferredItems = useDeferredValue(filteredItems)\r\n\r\n  return (\r\n    <>\r\n      <input type=\"text\" onChange={changeHandler} />\r\n      {/* {isPending && <div>Loading...</div>} */}\r\n      <ul>\r\n        {deferredItems}\r\n      </ul>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Example;\r\n"],"mappings":"AAAA;AACA,OAASA,QAAQ,CAAEC,aAAa,CAAEC,gBAAgB,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElE,KAAM,CAAAC,iBAAiB,CAAIC,GAAG,EAAK,CACjC,MAAO,IAAI,CAAAC,KAAK,CAACD,GAAG,CAAC,CAACE,IAAI,CAAC,IAAI,CAAC,CAACC,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,WAAAC,MAAA,CAAaD,KAAK,CAAE,CAAC,CACxE,CAAC,CAED,KAAM,CAAAE,UAAU,CAAGR,iBAAiB,CAAC,KAAK,CAAC,CAE3C,KAAM,CAAAS,OAAO,CAAGA,CAAA,GAAM,CACpB;AACA,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAE9C,KAAM,CAAAqB,aAAa,CAAIC,CAAC,EAAK,CAC3B;AACA;AACA;AACAF,YAAY,CAACE,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC9B,CAAC,CAED,KAAM,CAAAC,aAAa,CAAGR,UAAU,CAC/BS,MAAM,CAAEZ,IAAI,EAAK,CAChB,GAAIK,SAAS,GAAK,EAAE,CAAE,MAAO,KAAI,CACjC,MAAO,CAAAL,IAAI,CAACa,QAAQ,CAACR,SAAS,CAAC,CACjC,CAAC,CAAC,CACDN,GAAG,CAAEC,IAAI,eACRV,IAAA,OAAAwB,QAAA,CAAgBd,IAAI,EAAXA,IAAgB,CAC1B,CAAC,CAEF,KAAM,CAAAe,aAAa,CAAG3B,gBAAgB,CAACuB,aAAa,CAAC,CAErD,mBACEjB,KAAA,CAAAF,SAAA,EAAAsB,QAAA,eACExB,IAAA,UAAO0B,IAAI,CAAC,MAAM,CAACC,QAAQ,CAAEV,aAAc,CAAE,CAAC,cAE9CjB,IAAA,OAAAwB,QAAA,CACGC,aAAa,CACZ,CAAC,EACL,CAAC,CAEP,CAAC,CAED,cAAe,CAAAX,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}