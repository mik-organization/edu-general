{"ast":null,"code":"import\"./App.css\";import{Suspense,useState,useEffect,lazy}from\"react\";import BaseErrorBoundary from\"./BaseErrorBoundary\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const STORAGE_KEY=\"rcg-current-lec-index\";const DynamicLoader=_ref=>{let{component}=_ref;const LazyComponent=/*#__PURE__*/lazy(()=>import(\"\".concat(component)));return/*#__PURE__*/_jsx(BaseErrorBoundary,{children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),children:/*#__PURE__*/_jsx(LazyComponent,{})})});};const App=_ref2=>{var _localStorage$getItem;let{lectures}=_ref2;/**\r\n   * ローカルストレージより画面復帰時のレクチャーインデックスを取得\r\n   */let restoredLecIndx=(_localStorage$getItem=localStorage.getItem(STORAGE_KEY))!==null&&_localStorage$getItem!==void 0?_localStorage$getItem:0;restoredLecIndx=restoredLecIndx<lectures.length?restoredLecIndx:0;const[lecIndex,setLecIndex]=useState(restoredLecIndx);/**\r\n   * レクチャーID（フォルダ名）を取得\r\n   */const lecId=lectures[lecIndex];/**\r\n   * プルダウン変更時処理\r\n   */const handleChange=event=>setLecIndex(event.target.value);useEffect(()=>localStorage.setItem(STORAGE_KEY,lecIndex),[lecIndex]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"select\",{className:\"App-select\",value:lecIndex,onChange:handleChange,children:lectures.map((id,index)=>/*#__PURE__*/_jsx(\"option\",{value:index,children:id},id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"App-start\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u7DF4\\u7FD2\\u30B3\\u30FC\\u30C9\\uFF08start\\uFF09\"}),/*#__PURE__*/_jsx(DynamicLoader,{component:\"./\".concat(lecId,\"/start/Example\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"App-end\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5B8C\\u6210\\u30B3\\u30FC\\u30C9\\uFF08end\\uFF09\"}),/*#__PURE__*/_jsx(DynamicLoader,{component:\"./\".concat(lecId,\"/end/Example\")})]})]});};export default App;","map":{"version":3,"names":["Suspense","useState","useEffect","lazy","BaseErrorBoundary","jsx","_jsx","jsxs","_jsxs","STORAGE_KEY","DynamicLoader","_ref","component","LazyComponent","concat","children","fallback","App","_ref2","_localStorage$getItem","lectures","restoredLecIndx","localStorage","getItem","length","lecIndex","setLecIndex","lecId","handleChange","event","target","value","setItem","className","onChange","map","id","index"],"sources":["C:/Users/user/Documents/work/react-guide-material/15_performance/src/App.js"],"sourcesContent":["import \"./App.css\";\r\nimport { Suspense, useState, useEffect, lazy } from \"react\";\r\nimport BaseErrorBoundary from \"./BaseErrorBoundary\";\r\n\r\nconst STORAGE_KEY = \"rcg-current-lec-index\";\r\n\r\nconst DynamicLoader = ({ component }) => {\r\n  const LazyComponent = lazy(() => import(`${component}`));\r\n  return (\r\n    <BaseErrorBoundary>\r\n      <Suspense fallback={<div>Loading...</div>}>\r\n        <LazyComponent />\r\n      </Suspense>\r\n    </BaseErrorBoundary>\r\n  );\r\n};\r\n\r\nconst App = ({ lectures }) => {\r\n  /**\r\n   * ローカルストレージより画面復帰時のレクチャーインデックスを取得\r\n   */\r\n  let restoredLecIndx = localStorage.getItem(STORAGE_KEY) ?? 0;\r\n  restoredLecIndx = restoredLecIndx < lectures.length ? restoredLecIndx : 0;\r\n  const [lecIndex, setLecIndex] = useState(restoredLecIndx);\r\n\r\n  /**\r\n   * レクチャーID（フォルダ名）を取得\r\n   */\r\n  const lecId = lectures[lecIndex];\r\n\r\n  /**\r\n   * プルダウン変更時処理\r\n   */\r\n  const handleChange = (event) => setLecIndex(event.target.value);\r\n  useEffect(() => localStorage.setItem(STORAGE_KEY, lecIndex), [lecIndex]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <select className=\"App-select\" value={lecIndex} onChange={handleChange}>\r\n        {lectures.map((id, index) => (\r\n          <option key={id} value={index}>\r\n            {id}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      <div className=\"App-start\">\r\n        <h2>練習コード（start）</h2>\r\n        <DynamicLoader component={`./${lecId}/start/Example`} />\r\n      </div>\r\n      <div className=\"App-end\">\r\n        <h2>完成コード（end）</h2>\r\n        <DynamicLoader component={`./${lecId}/end/Example`} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"AAAA,MAAO,WAAW,CAClB,OAASA,QAAQ,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,IAAI,KAAQ,OAAO,CAC3D,MAAO,CAAAC,iBAAiB,KAAM,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEpD,KAAM,CAAAC,WAAW,CAAG,uBAAuB,CAE3C,KAAM,CAAAC,aAAa,CAAGC,IAAA,EAAmB,IAAlB,CAAEC,SAAU,CAAC,CAAAD,IAAA,CAClC,KAAM,CAAAE,aAAa,cAAGV,IAAI,CAAC,IAAM,MAAM,IAAAW,MAAA,CAAIF,SAAS,CAAE,CAAC,CAAC,CACxD,mBACEN,IAAA,CAACF,iBAAiB,EAAAW,QAAA,cAChBT,IAAA,CAACN,QAAQ,EAACgB,QAAQ,cAAEV,IAAA,QAAAS,QAAA,CAAK,YAAU,CAAK,CAAE,CAAAA,QAAA,cACxCT,IAAA,CAACO,aAAa,GAAE,CAAC,CACT,CAAC,CACM,CAAC,CAExB,CAAC,CAED,KAAM,CAAAI,GAAG,CAAGC,KAAA,EAAkB,KAAAC,qBAAA,IAAjB,CAAEC,QAAS,CAAC,CAAAF,KAAA,CACvB;AACF;AACA,KACE,GAAI,CAAAG,eAAe,EAAAF,qBAAA,CAAGG,YAAY,CAACC,OAAO,CAACd,WAAW,CAAC,UAAAU,qBAAA,UAAAA,qBAAA,CAAI,CAAC,CAC5DE,eAAe,CAAGA,eAAe,CAAGD,QAAQ,CAACI,MAAM,CAAGH,eAAe,CAAG,CAAC,CACzE,KAAM,CAACI,QAAQ,CAAEC,WAAW,CAAC,CAAGzB,QAAQ,CAACoB,eAAe,CAAC,CAEzD;AACF;AACA,KACE,KAAM,CAAAM,KAAK,CAAGP,QAAQ,CAACK,QAAQ,CAAC,CAEhC;AACF;AACA,KACE,KAAM,CAAAG,YAAY,CAAIC,KAAK,EAAKH,WAAW,CAACG,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAC/D7B,SAAS,CAAC,IAAMoB,YAAY,CAACU,OAAO,CAACvB,WAAW,CAAEgB,QAAQ,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAExE,mBACEjB,KAAA,QAAKyB,SAAS,CAAC,KAAK,CAAAlB,QAAA,eAClBT,IAAA,WAAQ2B,SAAS,CAAC,YAAY,CAACF,KAAK,CAAEN,QAAS,CAACS,QAAQ,CAAEN,YAAa,CAAAb,QAAA,CACpEK,QAAQ,CAACe,GAAG,CAAC,CAACC,EAAE,CAAEC,KAAK,gBACtB/B,IAAA,WAAiByB,KAAK,CAAEM,KAAM,CAAAtB,QAAA,CAC3BqB,EAAE,EADQA,EAEL,CACT,CAAC,CACI,CAAC,cAET5B,KAAA,QAAKyB,SAAS,CAAC,WAAW,CAAAlB,QAAA,eACxBT,IAAA,OAAAS,QAAA,CAAI,iDAAY,CAAI,CAAC,cACrBT,IAAA,CAACI,aAAa,EAACE,SAAS,MAAAE,MAAA,CAAOa,KAAK,kBAAiB,CAAE,CAAC,EACrD,CAAC,cACNnB,KAAA,QAAKyB,SAAS,CAAC,SAAS,CAAAlB,QAAA,eACtBT,IAAA,OAAAS,QAAA,CAAI,+CAAU,CAAI,CAAC,cACnBT,IAAA,CAACI,aAAa,EAACE,SAAS,MAAAE,MAAA,CAAOa,KAAK,gBAAe,CAAE,CAAC,EACnD,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAV,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}