# Issue一覧

## Phase 1: 環境構築・基盤 (Issue #1-10)

### Issue #1: プロジェクト初期設定・Eclipse環境構築
**目的**: Eclipse + Spring Boot + Gradle の基本環境理解

**作業内容**:
- Spring Boot プロジェクト作成（Spring Initializr）
- Eclipse への Gradle プロジェクトインポート
- Gradle 設定ファイル（build.gradle）理解
- Eclipse での Gradle タスク実行方法
- JDK 17 設定確認
- Google Java Format プラグイン設定
- application.yml 設定
- プロジェクト構造の理解
- README.md 作成

**受け入れ条件**:
- [ ] Spring Boot アプリケーションが起動すること
- [ ] Eclipse で Gradle タスクが実行できること
- [ ] Google Java Format が適用されること
- [ ] README.md に基本的な説明が記載されていること

---

### Issue #2: MySQL データベース設定
**目的**: MySQL・JPA設定の理解

**作業内容**:
- MySQL データベース作成
- MySQL ユーザー作成と権限設定
- application.yml でデータベース接続設定
- JPA 設定（DDL auto, naming strategy等）
- 初期データ投入スクリプト（data.sql）作成
- 文字コード設定（UTF-8/utf8mb4）の確認

**受け入れ条件**:
- [ ] MySQL に接続できること
- [ ] JPA エンティティからテーブルが自動生成されること
- [ ] 日本語データが正しく保存・取得できること

---

### Issue #3: Book エンティティ作成
**目的**: JPA エンティティの基本理解

**作業内容**:
- Book エンティティクラス作成
- アノテーション設定 (@Entity, @Id, @Column)
- バリデーション設定

**受け入れ条件**:
- [ ] Book エンティティが作成されていること
- [ ] 必要なフィールドが定義されていること（id, title, author, isbn, publishedYear）
- [ ] テーブルが自動生成されること

---

### Issue #4: Book Repository 作成
**目的**: Spring Data JPA の理解

**作業内容**:
- JpaRepository を継承した Repository 作成
- 基本的なクエリメソッド実装
- カスタムクエリ作成

**受け入れ条件**:
- [ ] BookRepository が作成されていること
- [ ] 基本的な CRUD 操作ができること
- [ ] findByTitle, findByAuthor などのメソッドが動作すること

---

### Issue #5: Book Service 作成
**目的**: ビジネスロジック層の理解

**作業内容**:
- Service クラス作成
- CRUD メソッド実装
- トランザクション設定

**受け入れ条件**:
- [ ] BookService が作成されていること
- [ ] トランザクション管理が適切に設定されていること
- [ ] ビジネスロジックが Service 層に集約されていること

---

### Issue #6: Book Controller 作成
**目的**: REST API の基本理解

**作業内容**:
- RestController 作成
- CRUD エンドポイント実装
- リクエスト/レスポンス DTO 作成

**受け入れ条件**:
- [ ] 以下のエンドポイントが動作すること
  - GET /api/books（一覧取得）
  - GET /api/books/{id}（詳細取得）
  - POST /api/books（登録）
  - PUT /api/books/{id}（更新）
  - DELETE /api/books/{id}（削除）
- [ ] Talend API Tester で動作確認済みであること

---

### Issue #7: ログ設定・Eclipse デバッグ設定
**目的**: Eclipse でのデバッグ・運用を意識した基本設定

**作業内容**:
- Logback 設定
- Eclipse でのブレークポイント設定
- デバッグ実行方法
- コンソールログの確認方法
- Eclipse の Git 統合使用方法
- 基本的なエラーハンドリング

**受け入れ条件**:
- [ ] ログレベル別の出力が確認できること
- [ ] Eclipse でブレークポイントデバッグができること
- [ ] Git 操作が Eclipse から実行できること

---

### Issue #8: 例外ハンドリング実装
**目的**: エラー処理の理解

**作業内容**:
- カスタム例外クラス作成
- GlobalExceptionHandler 作成
- エラーレスポンス統一

**受け入れ条件**:
- [ ] 統一されたエラーレスポンス形式が定義されていること
- [ ] 各種例外が適切にハンドリングされること
- [ ] HTTPステータスコードが適切に返されること

---

### Issue #9: バリデーション強化
**目的**: 入力値検証の理解

**作業内容**:
- Bean Validation 設定
- カスタムバリデーター作成
- エラーメッセージ国際化

**受け入れ条件**:
- [ ] 必須項目のバリデーションが動作すること
- [ ] ISBN形式のバリデーションが動作すること
- [ ] エラーメッセージが日本語で表示されること

---

### Issue #10: API テスト・ドキュメント
**目的**: API 設計・テストの理解

**作業内容**:
- Swagger/OpenAPI 設定
- API ドキュメント自動生成
- Talend API Tester でのテストケース作成
- Postman Collection エクスポート

**受け入れ条件**:
- [ ] Swagger UI が表示されること（http://localhost:8080/swagger-ui.html）
- [ ] すべての API が Swagger UI から実行できること
- [ ] API テストケースが作成されていること

---

## Phase 2: 機能拡張 (Issue #11-20)

### Issue #11: User エンティティ・機能作成
**目的**: 複数エンティティの関連理解

**作業内容**:
- User エンティティ作成
- User Repository/Service/Controller 作成
- User 関連機能実装
- Book との関連は未実装

**受け入れ条件**:
- [ ] User の CRUD 操作ができること
- [ ] メールアドレスの重複チェックが動作すること

---

### Issue #12: 貸出機能（Loan エンティティ）
**目的**: エンティティ間の関連理解

**作業内容**:
- Loan エンティティ作成
- Book-User-Loan の関連設定
- 貸出API実装

**受け入れ条件**:
- [ ] 貸出処理が実行できること
- [ ] 同じ本を複数回貸出できないこと
- [ ] 貸出中の本の状態が管理されること

---

### Issue #13: 返却機能実装
**目的**: ビジネスロジックの複雑化対応

**作業内容**:
- 返却API実装
- 返却日の自動設定
- 貸出状態の更新

**受け入れ条件**:
- [ ] 返却処理が実行できること
- [ ] 返却日が自動記録されること
- [ ] 延滞日数が計算されること

---

### Issue #14: 検索機能強化
**目的**: 複雑なクエリの理解

**作業内容**:
- 複数条件検索
- 部分一致検索
- ページネーション実装

**受け入れ条件**:
- [ ] タイトル・著者での部分一致検索ができること
- [ ] 複数条件での AND/OR 検索ができること
- [ ] ページネーションが動作すること

---

### Issue #15: 貸出期限管理
**目的**: 日付処理とビジネスルール実装

**作業内容**:
- 貸出期限の設定（デフォルト14日）
- 延滞チェック機能
- 延滞者一覧取得API

**受け入れ条件**:
- [ ] 貸出時に返却期限が設定されること
- [ ] 延滞している貸出が検索できること
- [ ] 延滞日数が計算できること

---

### Issue #16: Eclipse でのJUnit単体テスト導入
**目的**: Eclipse + JUnit を活用したテスト駆動開発の基礎学習

**作業内容**:
- Eclipse での JUnit 5 実行環境設定
- Eclipse でのテストクラス作成方法
- Repository テスト作成（JUnit Runner使用）
- Service テスト作成
- Controller テスト作成（MockMvc使用）
- Eclipse でのテスト実行・デバッグ方法
- テストカバレッジ確認（EclEmma使用）

**受け入れ条件**:
- [ ] 各層のテストが作成されていること
- [ ] テストカバレッジが60%以上であること
- [ ] Eclipse からテストが実行できること

---

### Issue #17: 予約機能実装
**目的**: より複雑なビジネスロジック

**作業内容**:
- Reservation エンティティ作成
- 予約API実装
- 貸出可能時の自動通知（ログ出力）
- 予約機能のテスト作成

**受け入れ条件**:
- [ ] 貸出中の本を予約できること
- [ ] 予約順序が管理されること
- [ ] 返却時に予約者に通知されること（ログ）

---

### Issue #18: 在庫管理機能
**目的**: 複数在庫の管理

**作業内容**:
- BookCopy エンティティ作成（書籍の複数冊管理）
- 在庫数の管理
- 貸出可能冊数の表示

**受け入れ条件**:
- [ ] 同じ書籍を複数冊登録できること
- [ ] 貸出可能な在庫数が確認できること
- [ ] すべて貸出中の場合は貸出不可となること

---

### Issue #19: 貸出履歴機能
**目的**: 履歴データの管理

**作業内容**:
- LoanHistory エンティティ作成
- 返却時の履歴保存
- ユーザー別貸出履歴取得API
- 書籍別貸出履歴取得API

**受け入れ条件**:
- [ ] 返却後も貸出履歴が保持されること
- [ ] ユーザーの貸出履歴が取得できること
- [ ] 書籍の貸出回数が集計できること

---

### Issue #20: データ整合性チェック
**目的**: データ整合性の保証

**作業内容**:
- 貸出時の在庫チェック強化
- 予約と貸出の整合性チェック
- トランザクション管理の見直し

**受け入れ条件**:
- [ ] 同時アクセス時のデータ整合性が保たれること
- [ ] 楽観的ロックが実装されていること
- [ ] エラー時のロールバックが正しく動作すること

---

## Phase 3: 高度な機能 (Issue #21-30)

### Issue #21: 認証機能実装
**目的**: Spring Security の基本理解

**作業内容**:
- Spring Security 設定
- JWT トークン認証
- ユーザー認証API
- ログイン/ログアウト機能

**受け入れ条件**:
- [ ] ログイン API が動作すること
- [ ] JWT トークンが発行されること
- [ ] 認証が必要な API が保護されること

---

### Issue #22: 権限制御実装
**目的**: 認可の理解

**作業内容**:
- ロールベースアクセス制御
- メソッドレベルセキュリティ
- 管理者・一般ユーザー区分

**受け入れ条件**:
- [ ] 管理者のみ書籍登録・更新・削除ができること
- [ ] 一般ユーザーは閲覧・貸出のみ可能なこと
- [ ] 権限不足の場合 403 エラーが返ること

---

### Issue #23: 統計・レポート機能
**目的**: 集約クエリの理解

**作業内容**:
- 貸出統計API
- 人気書籍ランキング
- ユーザー別貸出履歴
- 月別貸出統計

**受け入れ条件**:
- [ ] 人気書籍TOP10が取得できること
- [ ] 月別の貸出数が集計できること
- [ ] ユーザーランキングが表示できること

---

### Issue #24: 通知機能
**目的**: 非同期処理の理解

**作業内容**:
- 返却期限通知
- 予約完了通知
- メール送信機能（モック実装）
- 通知履歴管理

**受け入れ条件**:
- [ ] 返却期限前日に通知が送信されること（ログ）
- [ ] 予約書籍が利用可能時に通知されること
- [ ] 通知履歴が記録されること

---

### Issue #25: ファイルアップロード
**目的**: ファイル処理の理解

**作業内容**:
- 書籍画像アップロード
- CSV インポート/エクスポート
- ファイル管理API
- ファイルサイズ制限

**受け入れ条件**:
- [ ] 書籍画像がアップロードできること
- [ ] CSV で書籍データを一括登録できること
- [ ] CSV で書籍データをエクスポートできること

---

### Issue #26: 検索機能の高度化
**目的**: 全文検索と高度な検索機能

**作業内容**:
- 全文検索機能実装
- ファセット検索
- 検索履歴の保存
- 検索結果のソート機能

**受け入れ条件**:
- [ ] キーワードでの全文検索ができること
- [ ] 出版年、カテゴリでの絞り込みができること
- [ ] 関連度順、新着順でソートできること

---

### Issue #27: キャッシュ実装（基本）
**目的**: キャッシュの基本理解

**作業内容**:
- Spring Cache 設定
- 書籍情報のキャッシュ
- キャッシュクリア機能
- キャッシュ統計

**受け入れ条件**:
- [ ] 頻繁にアクセスされるデータがキャッシュされること
- [ ] 更新時にキャッシュがクリアされること
- [ ] キャッシュヒット率が確認できること

---

### Issue #28: バッチ処理実装
**目的**: 定期処理の実装

**作業内容**:
- 延滞通知バッチ
- 予約期限切れ処理
- 統計情報集計バッチ
- Spring Scheduler 設定

**受け入れ条件**:
- [ ] 毎日定時に延滞チェックが実行されること
- [ ] 予約期限切れが自動処理されること
- [ ] バッチ実行履歴が記録されること

---

### Issue #29: 監査ログ実装
**目的**: 監査証跡の記録

**作業内容**:
- 操作ログの記録
- Spring AOP での自動記録
- ログ検索API
- 重要操作の追跡

**受け入れ条件**:
- [ ] CRUD 操作がログに記録されること
- [ ] ログイン/ログアウトが記録されること
- [ ] ユーザー別、日付別でログ検索できること

---

### Issue #30: データバックアップ・リストア
**目的**: データ保護の実装

**作業内容**:
- データエクスポート機能
- データインポート機能
- バックアップスケジュール設定
- リストア手順書作成

**受け入れ条件**:
- [ ] 全データをJSON/CSVでエクスポートできること
- [ ] エクスポートデータから復元できること
- [ ] バックアップ手順書が作成されていること

---

## Phase 4: 高度なバックエンド機能・統合 (Issue #31-40)

### Issue #31: API 統合テスト設計
**目的**: E2E テストの理解

**作業内容**:
- 統合テスト環境構築
- API シナリオテスト作成
- Talend API Tester での手動テスト手順書作成
- H2 Database を使用したテスト環境

**受け入れ条件**:
- [ ] 主要なユースケースの統合テストが作成されていること
- [ ] テストデータの初期化が自動化されていること
- [ ] CI で統合テストが実行できること

---

### Issue #32: パフォーマンステスト・Gradle最適化
**目的**: 性能を意識した開発・ビルド最適化

**作業内容**:
- JMeter を使用した負荷テスト
- データベースクエリ最適化
- N+1 問題の検出・解決
- Gradle ビルドキャッシュ活用
- 並列ビルド設定
- プロファイルベースビルド

**受け入れ条件**:
- [ ] 100件同時アクセスに耐えられること
- [ ] N+1 問題が解決されていること
- [ ] ビルド時間が30%短縮されること

---

### Issue #33: デプロイメント設定・DB最適化
**目的**: 本番環境・データベース最適化への理解

**作業内容**:
- アプリケーションのJAR化
- 環境別設定管理（dev/prod）
- MySQL パフォーマンス設定
- データベースインデックス設計
- MySQL特有の最適化（クエリキャッシュ、バッファプール等）

**受け入れ条件**:
- [ ] 実行可能JARが作成できること
- [ ] 環境変数で設定を切り替えられること
- [ ] 適切なインデックスが設定されていること

---

### Issue #34: モニタリング・ログ強化
**目的**: 運用監視の理解

**作業内容**:
- Actuator を使用したヘルスチェック
- メトリクス収集設定
- 構造化ログ実装
- ログローテーション設定

**受け入れ条件**:
- [ ] /actuator/health でヘルスチェックができること
- [ ] アプリケーションメトリクスが取得できること
- [ ] ログがJSON形式で出力されること

---

### Issue #35: セキュリティ強化
**目的**: セキュリティベストプラクティス

**作業内容**:
- OWASP Top 10 対策
- セキュリティヘッダー設定
- SQL インジェクション対策の確認
- XSS 対策

**受け入れ条件**:
- [ ] セキュリティヘッダーが設定されていること
- [ ] SQL インジェクションが防げていること
- [ ] パスワードが暗号化されて保存されること

---

### Issue #36: API バージョニング
**目的**: API 設計の発展

**作業内容**:
- API バージョン管理戦略
- 後方互換性の維持
- 廃止予定 API の管理
- バージョン別ドキュメント

**受け入れ条件**:
- [ ] /api/v1/ と /api/v2/ が共存できること
- [ ] 古いバージョンのAPIが動作すること
- [ ] バージョン別のSwagger UIが表示されること

---

### Issue #37: 大量データ処理・DB最適化
**目的**: MySQL 特有の機能・スケーラビリティの理解

**作業内容**:
- MySQL 特有機能活用（JSON型、Generated Columns等）
- バッチ処理実装
- ページング最適化（OFFSET/LIMIT最適化）
- パーティショニング設計
- EXPLAIN を使用したクエリ分析
- インデックスヒントの活用

**受け入れ条件**:
- [ ] 10万件のデータで検索が1秒以内に完了すること
- [ ] バッチ処理で1万件を5分以内に処理できること
- [ ] EXPLAIN で実行計画が最適化されていること

---

### Issue #38: 外部 API 連携
**目的**: システム間連携の理解

**作業内容**:
- 外部書籍情報API との連携（モック）
- RestTemplate/WebClient の使用
- 回復性パターン（Circuit Breaker）実装
- API レート制限対応

**受け入れ条件**:
- [ ] 外部APIからデータ取得ができること
- [ ] 外部API障害時もシステムが停止しないこと
- [ ] リトライ処理が実装されていること

---

### Issue #39: 高度なキャッシュ戦略
**目的**: パフォーマンス最適化

**作業内容**:
- 多層キャッシュの実装
- キャッシュ戦略設計（TTL、LRU）
- キャッシュ無効化パターン
- キャッシュウォーミング

**受け入れ条件**:
- [ ] 適切なキャッシュ戦略が実装されていること
- [ ] キャッシュヒット率が80%以上であること
- [ ] キャッシュ更新が適切に行われること

---

### Issue #40: 最終的なリファクタリング
**目的**: コード品質の向上

**作業内容**:
- コードレビュー実施
- 技術的負債の解消
- 設計パターンの適用
- ドキュメント整備

**受け入れ条件**:
- [ ] 重複コードが除去されていること
- [ ] 適切な設計パターンが適用されていること
- [ ] すべての public メソッドに Javadoc があること
- [ ] README が最新化されていること